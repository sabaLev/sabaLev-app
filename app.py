import streamlit as st
import pandas as pd

st.title("–¢–µ—Å—Ç –º–æ–±–∏–ª—å–Ω–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã")

st.write("""
### –ü—Ä–æ–±–ª–µ–º–∞:
–ù–∞—Ç–∏–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã Streamlit **–ù–ï –ú–û–ì–£–¢** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞—Ç—å —Ü–∏—Ñ—Ä–æ–≤—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ.

### –†–µ—à–µ–Ω–∏–µ:
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ `st.number_input` –ø–æ–ª—è –¥–ª—è —á–∏—Å–ª–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞.
""")

st.divider()

# –í–∞—Ä–∏–∞–Ω—Ç 1: –û—Ç–¥–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –≤–≤–æ–¥–∞
st.header("1. –û—Ç–¥–µ–ª—å–Ω—ã–µ –ø–æ–ª—è (—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ)")

col1, col2, col3 = st.columns(3)

with col1:
    price = st.number_input(
        "–¶–µ–Ω–∞ ‚ÇΩ", 
        min_value=0.0, 
        value=100.0, 
        step=1.0,
        format="%.2f",
        key="price_input"
    )

with col2:
    quantity = st.number_input(
        "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ", 
        min_value=0, 
        value=1, 
        step=1,
        key="qty_input"
    )

with col3:
    discount = st.number_input(
        "–°–∫–∏–¥–∫–∞ %", 
        min_value=0, 
        max_value=100, 
        value=0,
        step=1,
        key="discount_input"
    )

total = price * quantity * (1 - discount/100)
st.success(f"–ò—Ç–æ–≥–æ: **{total:.2f} ‚ÇΩ**")

st.divider()

# –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–æ—Å—Ç–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏
st.header("2. –ù–∞—Ç–∏–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ Streamlit")

df = pd.DataFrame({
    '–ü—Ä–æ–¥—É–∫—Ç': ['–¢–æ–≤–∞—Ä A', '–¢–æ–≤–∞—Ä B', '–¢–æ–≤–∞—Ä C'],
    '–¶–µ–Ω–∞': [100.0, 200.0, 300.0],
    '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ': [5, 3, 2]
})

edited_df = st.data_editor(
    df,
    column_config={
        '–¶–µ–Ω–∞': st.column_config.NumberColumn(
            "–¶–µ–Ω–∞ (‚ÇΩ)",
            min_value=0.0,
            format="%.2f ‚ÇΩ",
            help="–ù–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞"
        ),
        '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ': st.column_config.NumberColumn(
            "–ö–æ–ª-–≤–æ",
            min_value=0,
            step=1,
            help="–ù–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞"
        )
    },
    num_rows="fixed",
    use_container_width=True
)

# –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –∏—Ç–æ–≥
if not edited_df.empty:
    edited_df['–°—É–º–º–∞'] = edited_df['–¶–µ–Ω–∞'] * edited_df['–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ']
    total_sum = edited_df['–°—É–º–º–∞'].sum()
    st.metric("–û–±—â–∞—è —Å—É–º–º–∞", f"{total_sum:.2f} ‚ÇΩ")

st.divider()

# –í–∞—Ä–∏–∞–Ω—Ç 3: –§–æ—Ä–º–∞ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–æ–ª—è–º–∏
st.header("3. –§–æ—Ä–º–∞ –≤–≤–æ–¥–∞ (–ª—É—á—à–µ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö)")

with st.form("data_form"):
    st.write("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:")
    
    col1, col2 = st.columns(2)
    
    with col1:
        name = st.text_input("–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞")
        category = st.selectbox("–ö–∞—Ç–µ–≥–æ—Ä–∏—è", ["–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞", "–û–¥–µ–∂–¥–∞", "–ö–Ω–∏–≥–∏", "–î—Ä—É–≥–æ–µ"])
    
    with col2:
        cost = st.number_input("–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å", 0.0, 10000.0, 100.0, 0.01, format="%.2f")
        markup = st.slider("–ù–∞—Ü–µ–Ω–∫–∞ %", 0, 200, 50)
    
    # –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏
    submitted = st.form_submit_button("–†–∞—Å—Å—á–∏—Ç–∞—Ç—å")
    
    if submitted:
        selling_price = cost * (1 + markup/100)
        profit = selling_price - cost
        st.info(f"""
        ### –†–µ–∑—É–ª—å—Ç–∞—Ç:
        - **–¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏:** {selling_price:.2f} ‚ÇΩ
        - **–ü—Ä–∏–±—ã–ª—å:** {profit:.2f} ‚ÇΩ
        - **–†–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å:** {(profit/cost*100):.1f}%
        """)

st.divider()

# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
st.header("üì± –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤")

st.info("""
### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ:

1. **–î–ª—è —á–∏—Å–µ–ª –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:**
   - `st.number_input()` - –æ—Ç–∫—Ä–æ–µ—Ç —Ü–∏—Ñ—Ä–æ–≤—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
   - `st.slider()` - —É–¥–æ–±–Ω–æ –¥–ª—è –≤—ã–±–æ—Ä–∞ –∏–∑ –¥–∏–∞–ø–∞–∑–æ–Ω–∞

2. **–ò–∑–±–µ–≥–∞–π—Ç–µ:**
   - `st.data_editor` –¥–ª—è —á–∞—Å—Ç–æ–≥–æ —á–∏—Å–ª–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞
   - –ë–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö

3. **–°–æ–≤–µ—Ç—ã:**
   - –†–∞–∑–±–∏–≤–∞–π—Ç–µ —Ñ–æ—Ä–º—ã –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç–æ–ª–±—Ü–æ–≤
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `st.columns` –¥–ª—è –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è
   - –î–æ–±–∞–≤–ª—è–π—Ç–µ `step` –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ number_input
""")

# –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–±–æ—á–∏–π –ø—Ä–∏–º–µ—Ä
st.divider()
st.header("–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–±–æ—á–∏–π –ø—Ä–∏–º–µ—Ä")

# –ü—Ä–æ—Å—Ç–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞
value1 = st.number_input("–ü–µ—Ä–≤–æ–µ —á–∏—Å–ª–æ", value=10, key="ex1")
value2 = st.number_input("–í—Ç–æ—Ä–æ–µ —á–∏—Å–ª–æ", value=20, key="ex2")

if st.button("–°–ª–æ–∂–∏—Ç—å"):
    result = value1 + value2
    st.write(f"**{value1} + {value2} = {result}**")
